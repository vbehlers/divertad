<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bell Schedule Notification</title>
    <style>
        /* Bell Schedule Notification - Headless Version */
        .bell-schedule-container {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        .bell-schedule-header {
            margin-bottom: 2rem;
        }

        .bell-schedule-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #0051d2;
            margin-bottom: 0.5rem;
        }

        .bell-schedule-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .bell-schedule-panels {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .bell-schedule-panel {
            flex: 1;
            min-width: 200px;
            padding: 1.5rem;
            border-left: 2px solid #e2e8f0;
            background: #f9fafb;
            border-radius: 0.5rem;
        }

        .bell-schedule-value {
            font-size: 2.5rem;
            font-weight: 400;
            color: #0051d2;
            margin-bottom: 0.5rem;
            font-family: 'Roboto', sans-serif;
            line-height: 1;
        }

        .bell-schedule-label {
            font-size: 0.875rem;
            color: #374151;
            font-weight: 500;
        }

        .bell-schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .bell-schedule-table th,
        .bell-schedule-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .bell-schedule-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #0051d2;
        }

        .bell-schedule-table tr.current-period {
            background: #eff6ff;
            border-left: 4px solid #0051d2;
        }

        .bell-schedule-table tr.flash-next-period {
            background-color: #ffe5f1 !important;
            border-top: 2px solid #fff !important;
            border-bottom: 2px solid #fff !important;
        }

        .bell-schedule-value.flash-minutes {
            animation: flash-minutes 1.5s infinite ease-in-out;
        }

        @keyframes flash-minutes {
            0% { color: #0051d2; }
            50% { color: #ef4444; }
            100% { color: #0051d2; }
        }

        .bell-schedule-status {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .bell-schedule-status.current {
            background: #0051d2;
            color: white;
        }

        .bell-schedule-status.completed {
            background: #6b7280;
            color: white;
        }

        .bell-schedule-status.upcoming {
            background: #e5e7eb;
            color: #374151;
        }

        .bell-schedule-status.starting-soon {
            background: #ff75b3;
            color: white;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .bell-schedule-panels {
                flex-direction: column;
                gap: 1rem;
            }
            
            .bell-schedule-panel {
                min-width: auto;
                padding: 1rem;
            }
            
            .bell-schedule-value {
                font-size: 2rem;
                text-align: center;
            }
            
            .bell-schedule-label {
                text-align: center;
            }
            
            .bell-schedule-table {
                font-size: 0.875rem;
            }
            
            .bell-schedule-table th,
            .bell-schedule-table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Bell Schedule Notification - Headless Version -->
    <div class="bell-schedule-container">
        <!-- Header -->
        <div class="bell-schedule-header">
            <div class="bell-schedule-title">
                Tuesday, March 19: <span id="current-period-header">Period 2</span>
            </div>
            <div class="bell-schedule-subtitle">Regular Schedule</div>
        </div>

        <!-- KPI Panels -->
        <div class="bell-schedule-panels">
            <div class="bell-schedule-panel">
                <div class="bell-schedule-value" id="current-time">8:38:01</div>
                <div class="bell-schedule-label">Current Time</div>
            </div>
            
            <div class="bell-schedule-panel">
                <div class="bell-schedule-value" id="next-bell">10:49 / 116:23m</div>
                <div class="bell-schedule-label">Next Bell</div>
            </div>
            
            <div class="bell-schedule-panel">
                <div class="bell-schedule-value" id="special-events">0</div>
                <div class="bell-schedule-label">Special Events</div>
            </div>
        </div>

        <!-- Schedule Table -->
        <table class="bell-schedule-table">
            <thead>
                <tr>
                    <th>Period</th>
                    <th>Time</th>
                    <th>Duration</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>0</td>
                    <td>7:45 - 8:39</td>
                    <td>54 min</td>
                    <td><span class="bell-schedule-status completed">Completed</span></td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>8:45 - 9:42</td>
                    <td>57 min</td>
                    <td><span class="bell-schedule-status completed">Completed</span></td>
                </tr>
                <tr>
                    <td>Break</td>
                    <td>9:42 - 9:52</td>
                    <td>10 min</td>
                    <td><span class="bell-schedule-status completed">Completed</span></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>9:52 - 10:49</td>
                    <td>57 min</td>
                    <td><span class="bell-schedule-status current">Current</span></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>10:54 - 11:51</td>
                    <td>57 min</td>
                    <td><span class="bell-schedule-status upcoming">Upcoming</span></td>
                </tr>
                <tr>
                    <td>Lunch</td>
                    <td>11:51 - 12:21</td>
                    <td>30 min</td>
                    <td><span class="bell-schedule-status upcoming">Upcoming</span></td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>12:26 - 1:23</td>
                    <td>57 min</td>
                    <td><span class="bell-schedule-status upcoming">Upcoming</span></td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>1:28 - 2:25</td>
                    <td>57 min</td>
                    <td><span class="bell-schedule-status upcoming">Upcoming</span></td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>2:30 - 3:27</td>
                    <td>57 min</td>
                    <td><span class="bell-schedule-status upcoming">Upcoming</span></td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        // Bell Schedule Notification - Headless Version
        // Real-time clock and countdown functionality
        function updateTime() {
            const now = new Date();
            
            // Update current time
            const currentTimeElement = document.getElementById('current-time');
            const newTimeText = now.toLocaleTimeString('en-US', {
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            if ('startViewTransition' in document) {
                document.startViewTransition(() => {
                    currentTimeElement.textContent = newTimeText;
                });
            } else {
                currentTimeElement.textContent = newTimeText;
            }

            // Calculate current period based on time
            const currentTime = now.getHours() * 60 + now.getMinutes();
            let currentPeriod = 'Outside School Hours';
            
            if (currentTime >= 7*60 + 45 && currentTime < 8*60 + 39) {
                currentPeriod = 'Period 0';
            } else if (currentTime >= 8*60 + 45 && currentTime < 9*60 + 42) {
                currentPeriod = 'Period 1';
            } else if (currentTime >= 9*60 + 42 && currentTime < 9*60 + 52) {
                currentPeriod = 'Break';
            } else if (currentTime >= 9*60 + 52 && currentTime < 10*60 + 49) {
                currentPeriod = 'Period 2';
            } else if (currentTime >= 10*60 + 54 && currentTime < 11*60 + 51) {
                currentPeriod = 'Period 3';
            } else if (currentTime >= 11*60 + 51 && currentTime < 12*60 + 21) {
                currentPeriod = 'Lunch';
            } else if (currentTime >= 12*60 + 26 && currentTime < 13*60 + 23) {
                currentPeriod = 'Period 4';
            } else if (currentTime >= 13*60 + 28 && currentTime < 14*60 + 25) {
                currentPeriod = 'Period 5';
            } else if (currentTime >= 14*60 + 30 && currentTime < 15*60 + 27) {
                currentPeriod = 'Period 6';
            }
            
            // Update current period header
            const periodHeaderElement = document.getElementById('current-period-header');
            if ('startViewTransition' in document) {
                document.startViewTransition(() => {
                    periodHeaderElement.textContent = currentPeriod;
                });
            } else {
                periodHeaderElement.textContent = currentPeriod;
            }

            // Calculate time until next bell dynamically
            let nextBellTime = '';
            let timeUntilNext = 0;
            
            if (currentTime < 7*60 + 45) {
                nextBellTime = '7:45';
                timeUntilNext = (7*60 + 45) - currentTime;
            } else if (currentTime < 8*60 + 39) {
                nextBellTime = '8:39';
                timeUntilNext = (8*60 + 39) - currentTime;
            } else if (currentTime < 8*60 + 45) {
                nextBellTime = '8:45';
                timeUntilNext = (8*60 + 45) - currentTime;
            } else if (currentTime < 9*60 + 42) {
                nextBellTime = '9:42';
                timeUntilNext = (9*60 + 42) - currentTime;
            } else if (currentTime < 9*60 + 52) {
                nextBellTime = '9:52';
                timeUntilNext = (9*60 + 52) - currentTime;
            } else if (currentTime < 10*60 + 49) {
                nextBellTime = '10:49';
                timeUntilNext = (10*60 + 49) - currentTime;
            } else if (currentTime < 10*60 + 54) {
                nextBellTime = '10:54';
                timeUntilNext = (10*60 + 54) - currentTime;
            } else if (currentTime < 11*60 + 51) {
                nextBellTime = '11:51';
                timeUntilNext = (11*60 + 51) - currentTime;
            } else if (currentTime < 12*60 + 21) {
                nextBellTime = '12:21';
                timeUntilNext = (12*60 + 21) - currentTime;
            } else if (currentTime < 12*60 + 26) {
                nextBellTime = '12:26';
                timeUntilNext = (12*60 + 26) - currentTime;
            } else if (currentTime < 13*60 + 23) {
                nextBellTime = '1:23';
                timeUntilNext = (13*60 + 23) - currentTime;
            } else if (currentTime < 13*60 + 28) {
                nextBellTime = '1:28';
                timeUntilNext = (13*60 + 28) - currentTime;
            } else if (currentTime < 14*60 + 25) {
                nextBellTime = '2:25';
                timeUntilNext = (14*60 + 25) - currentTime;
            } else if (currentTime < 14*60 + 30) {
                nextBellTime = '2:30';
                timeUntilNext = (14*60 + 30) - currentTime;
            } else if (currentTime < 15*60 + 27) {
                nextBellTime = '3:27';
                timeUntilNext = (15*60 + 27) - currentTime;
            } else {
                nextBellTime = 'Tomorrow';
                timeUntilNext = 0;
            }
            
            if (timeUntilNext > 0) {
                const minutes = Math.floor(timeUntilNext / 60);
                const seconds = timeUntilNext % 60;
                
                const nextBellElement = document.getElementById('next-bell');
                if (nextBellElement) {
                    const newText = `${nextBellTime} / ${minutes}:${seconds.toString().padStart(2, '0')}m`;
                    
                    // Add flashing class if within 5 minutes
                    if (timeUntilNext <= 5) {
                        nextBellElement.classList.add('flash-minutes');
                    } else {
                        nextBellElement.classList.remove('flash-minutes');
                    }
                    
                    if ('startViewTransition' in document) {
                        document.startViewTransition(() => {
                            nextBellElement.textContent = newText;
                        });
                    } else {
                        nextBellElement.textContent = newText;
                    }
                }
            } else {
                const nextBellElement = document.getElementById('next-bell');
                if (nextBellElement) {
                    nextBellElement.textContent = `${nextBellTime} / --:--m`;
                    nextBellElement.classList.remove('flash-minutes');
                }
            }
            
            // Update table status dynamically
            updateTableStatus(currentPeriod, currentTime);
        }

        // Function to update table status dynamically
        function updateTableStatus(currentPeriod, currentTime) {
            const periodRows = document.querySelectorAll('.bell-schedule-table tbody tr');
            
            periodRows.forEach((row) => {
                // Remove existing status classes
                row.classList.remove('current-period', 'flash-next-period');
                
                const statusCell = row.querySelector('.bell-schedule-status');
                if (statusCell) {
                    statusCell.className = 'bell-schedule-status upcoming';
                    statusCell.textContent = 'Upcoming';
                }
                
                // Get period info from first column
                const periodCell = row.querySelector('td:first-child');
                if (!periodCell) return;
                
                const periodText = periodCell.textContent.trim();
                let periodStart = 0;
                let periodEnd = 0;
                
                // Determine period times based on period number/text
                if (periodText === '0') {
                    periodStart = 7*60 + 45;
                    periodEnd = 8*60 + 39;
                } else if (periodText === '1') {
                    periodStart = 8*60 + 45;
                    periodEnd = 9*60 + 42;
                } else if (periodText === 'Break') {
                    periodStart = 9*60 + 42;
                    periodEnd = 9*60 + 52;
                } else if (periodText === '2') {
                    periodStart = 9*60 + 52;
                    periodEnd = 10*60 + 49;
                } else if (periodText === '3') {
                    periodStart = 10*60 + 54;
                    periodEnd = 11*60 + 51;
                } else if (periodText === 'Lunch') {
                    periodStart = 11*60 + 51;
                    periodEnd = 12*60 + 21;
                } else if (periodText === '4') {
                    periodStart = 12*60 + 26;
                    periodEnd = 13*60 + 23;
                } else if (periodText === '5') {
                    periodStart = 13*60 + 28;
                    periodEnd = 14*60 + 25;
                } else if (periodText === '6') {
                    periodStart = 14*60 + 30;
                    periodEnd = 15*60 + 27;
                }
                
                // Check if this period is current, completed, or upcoming
                if (periodStart > 0 && periodEnd > 0) {
                    if (currentTime >= periodStart && currentTime < periodEnd) {
                        // Current period
                        row.classList.add('current-period');
                        if (statusCell) {
                            statusCell.className = 'bell-schedule-status current';
                            statusCell.textContent = 'Current';
                        }
                    } else if (currentTime >= periodEnd) {
                        // Completed period
                        if (statusCell) {
                            statusCell.className = 'bell-schedule-status completed';
                            statusCell.textContent = 'Completed';
                        }
                    } else {
                        // Upcoming period - check if it's within 5 minutes of starting
                        const timeUntilPeriod = periodStart - currentTime;
                        if (timeUntilPeriod <= 5 && timeUntilPeriod > 0) {
                            // Next period within 5 minutes - add background color
                            row.classList.add('flash-next-period');
                            if (statusCell) {
                                statusCell.className = 'bell-schedule-status starting-soon';
                                statusCell.textContent = 'Starting Soon';
                            }
                        }
                    }
                }
            });
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initial update
            updateTime();
            
            // Update every second
            setInterval(updateTime, 1000);
        });
    </script>
</body>
</html>
